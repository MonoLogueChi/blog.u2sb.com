---
title: 搬家到七牛云
date: 2017-11-26 22:21:27
tags: 建站笔记

comments: true
---

阿里云马上就要到期了，现在本站搬家到了七牛云，在这里记录一下搬家过程，以后想在七牛云上建站的小伙伴可以做一下参考。

<!-- more -->

## 七牛云的优势

七牛云完成实名之后可以有免费的10G存储空间，而且每个月有10G的HTTP下载流量，正常的一个博客已经足够使用了。虽然七牛云是收费的，但是国内的速度真的快，比免费的Github体验好多了，当然，如果真的没钱，就去用Github搞吧。在Github上搭建的博客，国内访问体验真的差，速度贼慢。

还有一点，貌似现在七牛使用CDN没有必须充10块钱的限制了，这就很爽了。

但是七牛云也有不太方便的地方，比如HTTPS流量不免费。

另外，又拍云也是一个不错的选择，可以自行比较一下七牛云和又拍云，然后自行选择使用哪个。

## 七牛云注册

七牛云注册很简单，点击下面的链接就可以注册（通过我的邀请链接注册对你们一点影响没有，但是可以给我增加5G流量）。  
[七牛云注册](https://portal.qiniu.com/signup?code=3lor2t6uys85u)

注册完成之后想要在这建站，要实名之后才能使用，直接在个人中心里进行实名验证就可以，这个过程很简单的。

## 域名

我们需要事先准备好一个已经备案的域名。域名备案走阿里云通道其实是很简单的，大家可以像我一样，先买三个月的阿里云主机，走阿里云的备案。

有关备案的事可以看一下这里 [小站的搭建过程](http://www.xxwhite.com/2017/BuildNote.html)

## 七牛云储存配置

完成实名之后，我们就需要创建储存空间了。

创建空间在`对象储存-新建储存空间`里，空间创建在哪里无所谓，毕竟流量是要走CDN的。

![](https://i.loli.net/2017/11/27/5a1baa9eb1e65.png)

## 绑定域名

创建完储存空间之后就需要绑定域名了。

### 绑定域名
点击绑定域名，然后进入绑定域名的设置。

![](https://i.loli.net/2017/11/27/5a1bac19351ac.png)

- 域名类型：普通域名，如果你不需要小绿锁的话，可以在CDN加速里绑定一个泛域名；
- 加速域名：输入你备案好的域名；
- 覆盖范围：自己选择，我选择了大陆，国外就没有必要了；
- 通信协议：有证书就选HTTPS，没有证书就选HTTP；
- 使用场景：根据自己的需求选择，博客的话选择图片小文件就好；
- 站源配置：这个应该事默认不能改的，也就是你刚才创建好的储存空间；
- 缓存配置：这个不懂的话就用默认吧，然后更新完了去刷缓存，更新了哪些文件就刷哪些，如果懂的话也不需要看我写的东西了。或者用自定义配置里的推荐配置也好。

剩下的高级配置什么的就不需要弄了。

### CNAME配置

先等待域名配置完成，域名配置完成后会发邮件提示你的，时间也不会特别长，这段时间随便干点别的，或者说先看一下下面的那一部分，把静态资源上传到空间。

![](https://i.loli.net/2017/11/27/5a1bb52d6d864.png)

可以看到域名信息中有一项CNAME。我们复制好这个之后，到就要配置DNS解析了，我是用的阿里云的DNS，所有就以阿里云为例介绍一下。

登录阿里云账号，在控制台里找到云解析DNS，然后设置自己的域名。

![](https://i.loli.net/2017/11/27/5a1bb6c1bcb39.png)  
![](https://i.loli.net/2017/11/27/5a1bb75ecf96a.png)

DNS解析弄完了之后，回到刚才七牛的 `对象储存` 里，点一下CNAME验证一下绑定，配置好解析之后一般需要一段时间才能生效，这个阿里云的貌似会很快，几秒就可以了。

![](https://i.loli.net/2017/11/27/5a1bb85944664.png)

## 上传资源

上传资源我建议使用七牛的[QSunSync](https://developer.qiniu.com/kodo/tools/1666/qsunsync)客户端，使用方法七牛官方文档介绍的很清楚。

![](https://i.loli.net/2017/11/27/5a1bb498a955a.png)

就剩把本地使用Hexo生成的静态文件上传到七牛储存空间里就可以了。至于怎么使用Hexo，可以看一下我以前写的[建站笔记](http://www.xxwhite.com/tags/%E5%BB%BA%E7%AB%99%E7%AC%94%E8%AE%B0/)。

## 测试一下网站吧

上面的都配置完成了之后，就在浏览器里输入自己的域名，访问自己的网站测试一下吧。

## 比较难受的地方

因为使用了CDN缓存，当我们更新了文章（修改）之后，需要手动刷新缓存才能生效，否则等CDN缓存过期不知道要等到哪辈子去。


import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as n,a,d as t,r,o as l}from"./app-By58iIS5.js";const p="data:image/avif;base64,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",o="/assets/OMV-2020-08-26-16-34-31-C78xM9Zy.avif",d="/assets/OMV-2020-08-26-16-34-37-BmW_qSUN.avif",A="/assets/OMV-2020-08-26-16-35-01-DqpmvjM8.avif",c="/assets/OMV-2020-08-26-16-38-37-DQlab_lb.avif",g="/assets/OMV-2020-08-26-16-39-09-Dey6dxit.avif",h="/assets/OMV-2020-08-26-16-39-14-DPFTMblx.avif",u="/assets/OMV-2020-08-26-16-40-41-DFBW1Bbh.avif",b="/assets/OMV-2020-08-26-16-40-47-zOV2PBqn.avif",m="/assets/OMV-2020-08-26-16-41-54-B8P2k38e.avif",v="/assets/OMV-2020-08-26-16-42-00-DLcb90b9.avif",f="/assets/OMV-2020-08-26-16-42-23-BcwAkC3n.avif",k="/assets/OMV-2020-08-26-16-42-42-B7vD0Fwr.avif",y="/assets/OMV-2020-08-26-16-43-21-DoZvc_pL.avif",x="/assets/OMV-2020-08-26-16-43-59-B5o6Khkl.avif",O="/assets/OMV-2020-08-26-16-48-04-DGN-xAsI.avif",M="/assets/OMV-2020-08-26-16-48-15-CZjKFvNk.avif",F="/assets/OMV-2020-08-26-16-48-53-CzFz-SP1.avif",V="/assets/OMV-2020-08-26-16-51-30-BrwMhkF8.avif",N="data:image/avif;base64,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",B="/assets/200826_173142_WindowsTerminal_iMc2-yitUKsA0.avif",L={};function E(D,i){const e=r("BiliBili");return l(),n("div",null,[i[0]||(i[0]=a('<p>这一篇文章讲怎么让 OMV 系统拥有冗余功能。也就是在 raid 上安装 OMV 系统，坏掉任意一块硬盘的情况下，系统照样能启动。</p><h2 id="准备" tabindex="-1"><a class="header-anchor" href="#准备"><span>准备</span></a></h2><blockquote><p>本文所用镜像为 <code>debian-10.5.0-amd64-netinst.iso</code></p></blockquote><blockquote><p>注意，演示所用环境，启动方式为 UEFI，非 secure boot，硬盘协议为 SATA，需要空间，10G 以上，推荐 60G 或更大空间。安装之前推荐将机器连接网络。</p></blockquote><blockquote><p>最好有 Linux 安装经验，看到英文不要慌，遇到和文章里不一样的，或者是看不懂的，尝试去翻译一下。每张图具体是什么意思，翻译一下图上的英文就能看懂，这个真的不难，我这个四级没过的废物都能看得懂。</p></blockquote><p>这一次我们需要从 Debian 安装 OMV，所以需要一个 Debian10 的镜像，可以在<a href="https://mirrors.huaweicloud.com/debian-cd/" target="_blank" rel="noopener noreferrer">这里</a>下载。</p><p>本文目的是讲 Debian 安装在 raid1 上，并在每个硬盘上安装引导，做的在任意一块硬盘损坏的情况下，系统均能正常启动。</p><h2 id="视频教程" tabindex="-1"><a class="header-anchor" href="#视频教程"><span>视频教程</span></a></h2>',8)),t(e,{bvid:"BV1Hh411R7iD"}),i[1]||(i[1]=a('<h2 id="安装-debian" tabindex="-1"><a class="header-anchor" href="#安装-debian"><span>安装 Debian</span></a></h2><p>请确保系统插入了两块以上的硬盘用于安装系统盘，接下来跟我我的讲解进入安装步骤。</p><p>首先进入图形化安装界面，语言选择英文即可。</p><figure><img src="'+p+'" alt="安装界面" tabindex="0" loading="lazy"><figcaption>安装界面</figcaption></figure><figure><img src="'+o+'" alt="语言选择" tabindex="0" loading="lazy"><figcaption>语言选择</figcaption></figure><p>区域选择中国，键盘选择美式键盘。</p><figure><img src="'+d+'" alt="区域和键盘" tabindex="0" loading="lazy"><figcaption>区域和键盘</figcaption></figure><figure><img src="'+A+'" alt="区域和键盘" tabindex="0" loading="lazy"><figcaption>区域和键盘</figcaption></figure><p>再接下来是网络设置，下面两张图填写的是主机名，这里根据你自己的实际情况填写，不懂的话默认即可，不需要修改。如果你的机器没有联网，会让你手动设置，这个时候跳过即可。</p><figure><img src="'+c+'" alt="网络设置" tabindex="0" loading="lazy"><figcaption>网络设置</figcaption></figure><p>接下来输入 root 密码。</p><figure><img src="'+g+'" alt="输入root密码" tabindex="0" loading="lazy"><figcaption>输入root密码</figcaption></figure><p>再接下来创建一个新用户。</p><figure><img src="'+h+'" alt="创建新用户" tabindex="0" loading="lazy"><figcaption>创建新用户</figcaption></figure><p>然后是硬盘部分，这是这篇文章的重点之一，这里选择手动分区。</p><p>先创建好分区表，选择对应的硬盘，直接回车即可创建。注意这会清空硬盘里原有的分区，并且会清空数据。</p><figure><img src="'+u+'" alt="创建好分区表" tabindex="0" loading="lazy"><figcaption>创建好分区表</figcaption></figure><p>然后创建一个 EFI 分区，不用太大，够用就行，你如果嫌小，可以自己改大一点。</p><figure><img src="'+b+'" alt="创建EFI分区" tabindex="0" loading="lazy"><figcaption>创建EFI分区</figcaption></figure><p>对另一块硬盘做相同的操作，两块硬盘最好是完全一致。</p><figure><img src="'+m+'" alt="另一块硬盘" tabindex="0" loading="lazy"><figcaption>另一块硬盘</figcaption></figure><p>然后开始创建软 raid，过程可以看图，看不懂的简单翻译一下就明白了。</p><figure><img src="'+v+'" alt="创建软raid" tabindex="0" loading="lazy"><figcaption>创建软raid</figcaption></figure><p>两块硬盘都选上，空闲 0 块。</p><figure><img src="'+f+'" alt="创建软raid" tabindex="0" loading="lazy"><figcaption>创建软raid</figcaption></figure><p>选择未分区的两个位置，创建软 raid。</p><figure><img src="'+k+'" alt="创建软raid" tabindex="0" loading="lazy"><figcaption>创建软raid</figcaption></figure><p>然后为创建出来的软 raid 分区，这里演示只有一个分区，没有必要按照网上教程分那么多区，然后分目录去挂载，一个就可以。</p><figure><img src="'+y+'" alt="软raid分区" tabindex="0" loading="lazy"><figcaption>软raid分区</figcaption></figure><p>然后确定不要 swap 分区，并且确定分区的更改。</p><figure><img src="'+x+'" alt="确定分区更改" tabindex="0" loading="lazy"><figcaption>确定分区更改</figcaption></figure><p>确定不插入其他 CD。</p><figure><img src="'+O+'" alt="CD" tabindex="0" loading="lazy"><figcaption>CD</figcaption></figure><p>选择合适的镜像源，这里选你认为最快的。</p><figure><img src="'+M+'" alt="选择镜像源" tabindex="0" loading="lazy"><figcaption>选择镜像源</figcaption></figure><p>选择需要安装的服务。</p><figure><img src="'+F+'" alt="需要安装的服务" tabindex="0" loading="lazy"><figcaption>需要安装的服务</figcaption></figure><p>最后等安装完成，重启应该就可以进入系统。</p><figure><img src="'+V+'" alt="安装完成" tabindex="0" loading="lazy"><figcaption>安装完成</figcaption></figure><h2 id="创建另一个启动项" tabindex="-1"><a class="header-anchor" href="#创建另一个启动项"><span>创建另一个启动项</span></a></h2><p>这样虽然把系统安装在了 raid1 上，但是引导只安装在了一块硬盘上，如果引导所在的硬盘挂了，那系统照样是会挂的。</p><p>接下来需要安装另一个启动引导。</p><p>登录系统，输入</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>ip addr</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>查看当前 ip。</p><figure><img src="'+N+`" alt="查看ip" tabindex="0" loading="lazy"><figcaption>查看ip</figcaption></figure><p>然后远程登录上去。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>ssh mc@192.168.91.136</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>然后切换到 root 用户，安装一些必要的软件</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>su</span></span>
<span class="line"><span></span></span>
<span class="line"><span>apt update</span></span>
<span class="line"><span>apt install sudo vim net-tools efibootmgr</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>将 mc 添加进 sudo 用户组</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>/sbin/usermod -a -G sudo mc</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>然后关掉 ssh 连接，重新登录一遍。</p><p>输入</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>df -h</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><figure><img src="`+B+`" alt="查看磁盘" tabindex="0" loading="lazy"><figcaption>查看磁盘</figcaption></figure><p>可以看到 <code>/dev/sda1</code> 是当前的 efi 磁盘，需要克隆到 <code>/dev/sdb1</code> 上（这个需要自行判断实际情况）。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>sudo dd if=/dev/sda1 of=/dev/sdb1</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>然后创建新的引导项（下面的命令需要你根据实际情况自行修改）。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>sudo efibootmgr -c -g -d /dev/sdb -p 1 -L &quot;debian #2&quot; -l &#39;\\EFI\\debian\\shimx64.efi&#39;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="测试" tabindex="-1"><a class="header-anchor" href="#测试"><span>测试</span></a></h2><p>然后重启看一下是不是有了一个启动项 <code>debian #2</code>，尝试一下用这个启动项启动系统，然后再尝试分别拔掉两块硬盘，系统能否正常启动。</p><h2 id="安装-omv" tabindex="-1"><a class="header-anchor" href="#安装-omv"><span>安装 OMV</span></a></h2><blockquote><p>建议：安装OMV之前将 <code>security.debian.org</code> 也替换掉</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>sed -i &quot;s@http://security.debian.org@https://mirrors.huaweicloud.com@g&quot; /etc/apt/sources.list</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></blockquote><p>首先将系统更新到最新</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>sudo apt-get update</span></span>
<span class="line"><span>sudo apt-get dist-upgrade</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>添加密钥</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>sudo apt-get install --yes gnupg</span></span>
<span class="line"><span>sudo wget -O &quot;/etc/apt/trusted.gpg.d/openmediavault-archive-keyring.asc&quot; https://packages.openmediavault.org/public/archive.key</span></span>
<span class="line"><span>sudo apt-key add &quot;/etc/apt/trusted.gpg.d/openmediavault-archive-keyring.asc&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>添加软件源</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>sudo vim /etc/apt/sources.list.d/openmediavault.list</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>写入内容为：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>deb https://packages.openmediavault.org/public usul main</span></span>
<span class="line"><span># deb https://downloads.sourceforge.net/project/openmediavault/packages usul main</span></span>
<span class="line"><span>## Uncomment the following line to add software from the proposed repository.</span></span>
<span class="line"><span>deb https://packages.openmediavault.org/public usul-proposed main</span></span>
<span class="line"><span># deb https://downloads.sourceforge.net/project/openmediavault/packages usul-proposed main</span></span>
<span class="line"><span>## This software is not part of OpenMediaVault, but is offered by third-party</span></span>
<span class="line"><span>## developers as a service to OpenMediaVault users.</span></span>
<span class="line"><span># deb https://packages.openmediavault.org/public usul partner</span></span>
<span class="line"><span># deb https://downloads.sourceforge.net/project/openmediavault/packages usul partner</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>然后安装</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>export LANG=C.UTF-8</span></span>
<span class="line"><span>export DEBIAN_FRONTEND=noninteractive</span></span>
<span class="line"><span>export APT_LISTCHANGES_FRONTEND=none</span></span>
<span class="line"><span></span></span>
<span class="line"><span>sudo apt-get update</span></span>
<span class="line"><span>sudo apt-get --yes --auto-remove --show-upgraded \\</span></span>
<span class="line"><span>    --allow-downgrades --allow-change-held-packages \\</span></span>
<span class="line"><span>    --no-install-recommends \\</span></span>
<span class="line"><span>    --option Dpkg::Options::=&quot;--force-confdef&quot; \\</span></span>
<span class="line"><span>    --option DPkg::Options::=&quot;--force-confold&quot; \\</span></span>
<span class="line"><span>    install openmediavault-keyring openmediavault</span></span>
<span class="line"><span></span></span>
<span class="line"><span>sudo omv-confdbadm populate</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>中间遇到什么需要让你手动选择的，全都是默认选项即可。</p><p>然后在浏览器输入机器的ip或者是<code>debian/</code>即可访问后台网络面板。</p><p>至于硬盘坏了怎么恢复，会在以后的文章中讲到。</p><h2 id="参考" tabindex="-1"><a class="header-anchor" href="#参考"><span>参考</span></a></h2><p><a href="https://www.jianshu.com/p/5557b6172b97" target="_blank" rel="noopener noreferrer">https://www.jianshu.com/p/5557b6172b97</a><br><a href="https://openmediavault.readthedocs.io/en/5.x/installation/on_debian.html" target="_blank" rel="noopener noreferrer">https://openmediavault.readthedocs.io/en/5.x/installation/on_debian.html</a></p>`,79))])}const Z=s(L,[["render",E]]),z=JSON.parse('{"path":"/2020/08261.omv-1.html","title":"OMV安装在raid上","lang":"zh-CN","frontmatter":{"title":"OMV安装在raid上","date":"2020-08-26T20:05:30.000Z","tag":["NAS","OMV"],"keywords":"OMV NAS OpenMediaVault raid1 Linux 安装","comments":true,"redirectFrom":["/2020/omv-1.html"],"description":"这一篇文章讲怎么让 OMV 系统拥有冗余功能。也就是在 raid 上安装 OMV 系统，坏掉任意一块硬盘的情况下，系统照样能启动。","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"OMV安装在raid上\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2020-08-26T20:05:30.000Z\\",\\"dateModified\\":\\"2025-05-18T04:19:59.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"MonoLogueChi\\",\\"url\\":\\"https://blog.u2sb.com\\"}]}"],["meta",{"property":"og:url","content":"https://blog.u2sb.com/2020/08261.omv-1.html"}],["meta",{"property":"og:site_name","content":"叉叉白"}],["meta",{"property":"og:title","content":"OMV安装在raid上"}],["meta",{"property":"og:description","content":"这一篇文章讲怎么让 OMV 系统拥有冗余功能。也就是在 raid 上安装 OMV 系统，坏掉任意一块硬盘的情况下，系统照样能启动。"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-05-18T04:19:59.000Z"}],["meta",{"property":"article:tag","content":"OMV"}],["meta",{"property":"article:tag","content":"NAS"}],["meta",{"property":"article:published_time","content":"2020-08-26T20:05:30.000Z"}],["meta",{"property":"article:modified_time","content":"2025-05-18T04:19:59.000Z"}]]},"git":{"createdTime":1747541999000,"updatedTime":1747541999000,"contributors":[{"name":"MonoLogueChi","username":"MonoLogueChi","email":"xxwhite@foxmail.com","commits":1,"url":"https://github.com/MonoLogueChi"}]},"readingTime":{"minutes":5.21,"words":1563},"filePathRelative":"2020/08261.omv-1.md","excerpt":"<p>这一篇文章讲怎么让 OMV 系统拥有冗余功能。也就是在 raid 上安装 OMV 系统，坏掉任意一块硬盘的情况下，系统照样能启动。</p>\\n","autoDesc":true}');export{Z as comp,z as data};

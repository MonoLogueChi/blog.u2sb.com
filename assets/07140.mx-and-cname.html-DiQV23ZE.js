import{_ as t}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as i,a,o as n}from"./app-CnYccAH2.js";const s={};function o(r,e){return n(),i("div",null,e[0]||(e[0]=[a(`<p>最近又遇到了 MX 记录和 CNAME 记录冲突的问题，简单记录一个解决办法，方便以后参考一下</p><p>CloudXNS 免费业务要关停了，这样就不得不把我的域名迁出去。我选择的是以前用过的 DNSPOD，这次迁移成本其实不大，把解析记录从 CloudXNS 导出到 excel 中，然后复制粘贴替换就可以轻松转化成 DNSPOD 的格式，再导入到 DNSPOD 就可以了，当你看到这篇文章时，已经迁移完成了。</p><p>说一下中间遇到的一个比较麻烦的问题吧，因为我有两个域名做了域名邮箱，这样 MX 记录就必须要有，但是我这两个域名同时也需要可以正常访问我的网站，网站用了 CDN，这样就必须要有 CNAME 记录，但是正常来说，CNAME 记录和 MX 记录时冲突的。</p><table><thead><tr><th>主机记录</th><th>记录类型</th><th>记录值</th></tr></thead><tbody><tr><td>@</td><td>MX</td><td><a href="http://mxbiz1.qq.com" target="_blank" rel="noopener noreferrer">mxbiz1.qq.com</a>.</td></tr><tr><td>@</td><td>CNAME</td><td>CDN 的 CNAME 记录</td></tr></tbody></table><p>其实@记录解析过去，也是会 301 跳转到 blog 记录上的。听起来和显性 URL 功能一样，但是显性 URL 也会和 MX 记录冲突。</p><p>CloudXNS 有一个独有的 Link 记录可以解决这个问题，当时也正是看重了这个功能，才把域名解析迁移到 CloudXNS 上的。现在换到了 DNSPOD 上，没有了这个功能了，无奈只能想其他的解决办法了。</p><p>灵机一动，想到我还有一台跑各种服务的 VPS，那就在 VPS 上做个 301 吧。</p><p>首先把<code>@</code>的 A 记录记录解析到 VPS 的 IP 上，然后在 NGINX 上配置</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>if ($host ~ &#39;^xxwhite.com&#39;){</span></span>
<span class="line"><span>	return 301 https://blog.xxwhite.com$request_uri;</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>或者</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>if ($host ~ &#39;^xxwhite.com&#39;){</span></span>
<span class="line"><span>	return 302 https://blog.xxwhite.com$request_uri;</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这样就解决了前面提到的问题。</p><p>那如果我不想跳转的话，要怎么办？那就用反向代理吧，如果访问量特别大的话，反向代理肯定时不合适的，但这也是没有办法的办法了。</p>`,13)]))}const l=t(s,[["render",o]]),c=JSON.parse('{"path":"/2019/07140.mx-and-cname.html","title":"域名解析的MX和CNAME记录冲突问题的解决","lang":"zh-CN","frontmatter":{"title":"域名解析的MX和CNAME记录冲突问题的解决","date":"2019-07-14T14:48:35.000Z","tag":["建站笔记"],"keywords":"域名解析,MX记录,CNAME记录,冲突","comments":true,"redirectFrom":["/2019/mx-and-cname.html"],"description":"最近又遇到了 MX 记录和 CNAME 记录冲突的问题，简单记录一个解决办法，方便以后参考一下","head":[["meta",{"property":"og:url","content":"https://blog.u2sb.com/2019/07140.mx-and-cname.html"}],["meta",{"property":"og:site_name","content":"叉叉白"}],["meta",{"property":"og:title","content":"域名解析的MX和CNAME记录冲突问题的解决"}],["meta",{"property":"og:description","content":"最近又遇到了 MX 记录和 CNAME 记录冲突的问题，简单记录一个解决办法，方便以后参考一下"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-04-06T05:10:35.000Z"}],["meta",{"property":"article:tag","content":"建站笔记"}],["meta",{"property":"article:published_time","content":"2019-07-14T14:48:35.000Z"}],["meta",{"property":"article:modified_time","content":"2025-04-06T05:10:35.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"域名解析的MX和CNAME记录冲突问题的解决\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2019-07-14T14:48:35.000Z\\",\\"dateModified\\":\\"2025-04-06T05:10:35.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"MonoLogueChi\\",\\"url\\":\\"https://blog.u2sb.com\\"}]}"]]},"git":{"createdTime":1743916235000,"updatedTime":1743916235000,"contributors":[{"name":"MonoLogueChi","username":"MonoLogueChi","email":"xxwhite@foxmail.com","commits":1,"url":"https://github.com/MonoLogueChi"}]},"readingTime":{"minutes":1.86,"words":557},"filePathRelative":"2019/07140.mx-and-cname.md","localizedDate":"2019年7月14日","excerpt":"<p>最近又遇到了 MX 记录和 CNAME 记录冲突的问题，简单记录一个解决办法，方便以后参考一下</p>\\n","autoDesc":true}');export{l as comp,c as data};

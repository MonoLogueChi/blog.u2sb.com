import{h as V,u as X,i as M,j as Z,k as ee,t as te,l as le,n as k,p as g,q as e,s as Ee,v as ae,x as se,R as I,y as re,z as ie,A as Be,B as oe,C as Ae,D as W,E as $,G as ne,H as ue,I as ce,J as me,L as he,K as de,M as ve,N as ye,O as P,P as De,Q as F}from"./app-C1cZc2zx.js";const pe=["/","/2017/1023.AdbUsing.html","/2017/1217.RandomNum1.html","/2017/1220.Valine.html","/2018/0113.50YearsLater.html","/2018/0127.Clipboard.html","/2018/0203.add-download-markdown.html","/2018/0224.Drcom.html","/2018/0301.drcom-develop.html","/2018/0525.graduation-and-flag.html","/2018/0707.using-oneindex.html","/2018/0713.image-format.html","/2018/1028.KeyCastOW.html","/2018/1120.9x9.html","/2019/01050.pay-for-knowledge.html","/2019/01190.cpu-reduction-voltage.html","/2019/01260.your-own-yilia-1.html","/2019/02010.your-own-yilia-2.html","/2019/04070.small-jj.html","/2019/04140.ddns.html","/2019/04290.unity-webgl-keng.html","/2019/07140.mx-and-cname.html","/2019/08080.rss-rsshub.html","/2019/09130.proxy1.html","/2019/10020.custom-mirror.html","/2019/10210.azure-ci.html","/2019/11130.unity-2danimation.html","/2019/11260.5g-wifi.html","/2019/11290.hexo-scripts.html","/2020/01110.yearend-summary.html","/2020/01180.archlinux-install.html","/2020/02220.aspnetcore-vue.html","/2020/02230.bilibili-danmaku.html","/2020/03230.bilibili-bvid.html","/2020/05160.blog-ci.html","/2020/06090.voicemeeter.html","/2020/06210.tm.html","/2020/07090.arduino-first-sight.html","/2020/07120.flash-image.html","/2020/07121.router-ap-wifi.html","/2020/07122.side-routing.html","/2020/07200.pve-router.html","/2020/08210.omv-oia.html","/2020/08260.omv-0.html","/2020/08261.omv-1.html","/2020/08280.omv-2.html","/2020/09030.omv-3.html","/2020/09040.omv-4.html","/2020/10290.Academic-conference-live-broadcast.html","/2021/08160.custom-mirror.html","/2022/01190.%E8%87%AA%E5%B7%B1%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%AF%BC%E6%92%AD%E5%8F%B0.html","/2022/02020.%E8%87%AA%E5%B7%B1%E5%BC%80%E5%8F%91%E4%B8%80%E4%B8%AAvuepress%E6%8F%92%E4%BB%B6.html","/2022/02090.%E7%94%A8Scoop%E5%AE%89%E8%A3%85%E4%B8%80%E4%BA%9B%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7.html","/2022/02150.%E5%8D%9A%E5%AE%A2%E7%8E%B0%E5%9C%A8%E7%9A%84%E6%83%85%E5%86%B5.html","/2022/02210.Docker%E5%AE%89%E8%A3%85Caddy%E4%BD%BF%E7%94%A8%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8F%92%E4%BB%B6.html","/2022/03010.FMP4%E3%80%81HLS%E5%92%8CDASH%E8%A7%86%E9%A2%91%E7%94%9F%E6%88%90.html","/2022/03090.%E4%BD%BF%E7%94%A8CI%E5%B0%86%E5%8D%9A%E5%AE%A2%E9%83%A8%E7%BD%B2%E5%88%B0GitHub.html","/2022/03091.%E4%BD%BF%E7%94%A8CI%E5%B0%86%E5%8D%9A%E5%AE%A2%E9%83%A8%E7%BD%B2%E5%88%B0%E5%8F%88%E6%8B%8D%E4%BA%91.html","/2022/06050.CSharp%E8%A7%A3%E6%9E%90B%E7%AB%99%E5%BC%B9%E5%B9%95.html","/2022/07040.%E4%BD%BF%E7%94%A8NDI%E5%8F%8C%E6%9C%BA%E4%BD%8D%E7%9B%B4%E6%92%AD.html","/2022/10270.CSharp%E7%9A%84IPAddress%E7%B1%BBJson%E5%BA%8F%E5%88%97%E5%8C%96%E5%92%8C%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96.html","/2022/10310.Arduino%E4%B8%8A%E4%BD%8D%E6%9C%BA%E9%80%9A%E4%BF%A1.html","/2023/01030.nginx-quic%E7%BC%96%E8%AF%91%E5%92%8C%E4%BD%BF%E7%94%A8.html","/2023/01050.%E5%B0%86%E5%8D%9A%E5%AE%A2%E5%88%86%E4%BA%AB%E5%88%B0%E5%BE%AE%E4%BF%A1.html","/2023/01200.%E5%B0%8F%E7%B1%B313%E5%AE%89%E8%A3%85KernelSU.html","/2023/05100.%E5%9C%A8Linux%E4%B8%AD%E5%AE%88%E6%8A%A4dotnetcore%E7%A8%8B%E5%BA%8F.html","/2023/05210.%E7%BC%96%E8%AF%91Caddy%E5%B9%B6%E4%BD%BF%E7%94%A8.html","/2023/11120.Unity3D%E5%BC%82%E6%AD%A5%E5%8A%A0%E8%BD%BDJson.html","/2024/03030.Unity3D%E4%B8%AD%E4%BD%BF%E7%94%A8SkiaSharp%E5%A4%84%E7%90%86Texture2D.html","/2024/08240.vlc-unity%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B.html","/2023/05220.%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AAWeb%E6%9C%8D%E5%8A%A1%E5%99%A8/0010.%E9%9C%80%E8%A6%81%E7%9A%84%E8%BD%AF%E4%BB%B6.html","/2023/05220.%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AAWeb%E6%9C%8D%E5%8A%A1%E5%99%A8/0020.%E9%9D%9Eroot%E7%94%A8%E6%88%B7%E5%92%8C%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE.html","/2023/05220.%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AAWeb%E6%9C%8D%E5%8A%A1%E5%99%A8/0030.%E6%9B%B4%E6%8D%A2%E5%9B%BD%E5%86%85%E9%95%9C%E5%83%8F%E5%92%8C%E5%AE%89%E8%A3%85%E5%9F%BA%E6%9C%AC%E8%BD%AF%E4%BB%B6.html","/2023/05220.%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AAWeb%E6%9C%8D%E5%8A%A1%E5%99%A8/0040.%E5%AE%89%E8%A3%85Caddy%E4%BD%9C%E4%B8%BAWeb%E6%9C%8D%E5%8A%A1%E5%99%A8.html","/2023/05220.%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AAWeb%E6%9C%8D%E5%8A%A1%E5%99%A8/0050.%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AEPHP.html","/2023/05220.%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AAWeb%E6%9C%8D%E5%8A%A1%E5%99%A8/0055.%E9%83%A8%E7%BD%B2%E5%92%8C%E9%85%8D%E7%BD%AEMeting.html","/2023/05220.%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AAWeb%E6%9C%8D%E5%8A%A1%E5%99%A8/0060.%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AEnodejs.html","/2023/05220.%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AAWeb%E6%9C%8D%E5%8A%A1%E5%99%A8/0070.%E9%83%A8%E7%BD%B2%E5%92%8C%E9%85%8D%E7%BD%AEwaline.html","/2023/05220.%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AAWeb%E6%9C%8D%E5%8A%A1%E5%99%A8/","/pages/MessageBoard.html","/pages/aboutme.html","/pages/friends.html","/404.html","/2017/","/2018/","/2019/","/2020/","/2021/","/2022/","/2023/","/2024/","/pages/","/category/","/tag/","/tag/%E6%90%9E%E6%9C%BA/","/tag/unity/","/tag/%E5%BB%BA%E7%AB%99%E7%AC%94%E8%AE%B0/","/tag/%E9%9A%8F%E4%BE%BF%E6%B0%B4%E6%B0%B4/","/tag/%E6%B6%A8%E5%A7%BF%E5%8A%BF/","/tag/%E8%BD%AF%E4%BB%B6/","/tag/c_/","/tag/%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/","/tag/linux/","/tag/dotnet/","/tag/%E7%A1%AC%E4%BB%B6/","/tag/%E8%BD%AF%E8%B7%AF%E7%94%B1/","/tag/nas/","/tag/omv/","/tag/%E7%9B%B4%E6%92%AD/","/tag/%E7%9B%B4%E6%92%AD%E5%AF%BC%E6%92%AD/","/article/","/star/","/timeline/"],Ce="SLIMSEARCH_QUERY_HISTORY",v=P(Ce,[]),ge=()=>{const{queryHistoryCount:a}=F;return{enabled:a>0,queryHistories:v,addQueryHistory:B=>{v.value=Array.from(new Set([B,...v.value.slice(0,a-1)]))},removeQueryHistory:B=>{v.value=[...v.value.slice(0,B),...v.value.slice(B+1)]}}},Q=a=>pe[a.id]+("anchor"in a?`#${a.anchor}`:""),Fe="SLIMSEARCH_RESULT_HISTORY",{resultHistoryCount:j}=F,y=P(Fe,[]),be=()=>({enabled:j>0,resultHistories:y,addResultHistory:i=>{{const B={link:Q(i),display:i.display};"header"in i&&(B.header=i.header),y.value=[B,...y.value.slice(0,j-1)]}},removeResultHistory:i=>{y.value=[...y.value.slice(0,i),...y.value.slice(i+1)]}}),fe=a=>{const i=ne(),B=M(),b=ue(),s=k(0),D=g(()=>s.value>0),n=ce([]);return me(()=>{const{search:f,terminate:m}=he(),p=ve(h=>{const{resultsFilter:x=E=>E,querySplitter:d,suggestionsFilter:R,...r}=i.value;h?(s.value+=1,f(h,B.value,r).then(E=>x(E,h,B.value,b.value)).then(E=>{s.value-=1,n.value=E}).catch(E=>{console.warn(E),s.value-=1,s.value||(n.value=[])})):n.value=[]},F.searchDelay-F.suggestDelay,{maxWait:5e3});de([a,B],([h])=>p(h.join(" "))),ye(()=>{m()})}),{isSearching:D,results:n}};var He=V({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(a,{emit:i}){const B=X(),b=M(),s=Z(ee),{addQueryHistory:D,queryHistories:n,removeQueryHistory:f}=ge(),{resultHistories:m,addResultHistory:p,removeResultHistory:h}=be(),x=te(a,"queries"),{results:d,isSearching:R}=fe(x),r=le({isQuery:!0,index:0}),E=k(0),u=k(0),q=g(()=>n.value.length>0||m.value.length>0),H=g(()=>d.value.length>0),w=g(()=>d.value[E.value]||null),T=()=>{const{isQuery:t,index:l}=r;l===0?(r.isQuery=!t,r.index=t?m.value.length-1:n.value.length-1):r.index=l-1},U=()=>{const{isQuery:t,index:l}=r;l===(t?n.value.length-1:m.value.length-1)?(r.isQuery=!t,r.index=0):r.index=l+1},O=()=>{E.value=E.value>0?E.value-1:d.value.length-1,u.value=w.value.contents.length-1},_=()=>{E.value=E.value<d.value.length-1?E.value+1:0,u.value=0},Y=()=>{u.value<w.value.contents.length-1?u.value+=1:_()},J=()=>{u.value>0?u.value-=1:O()},S=t=>t.map(l=>De(l)?l:e(l[0],l[1])),K=t=>{if(t.type==="customField"){const l=oe[t.index]||"$content",[c,o=""]=Ae(l)?l[b.value].split("$content"):l.split("$content");return t.display.map(A=>e("div",S([c,...A,o])))}return t.display.map(l=>e("div",S(l)))},C=()=>{E.value=0,u.value=0,i("updateQuery",""),i("close")},N=()=>e("div",{class:"slimsearch-records"},e("div",{class:"slimsearch-record"},[e("div",{class:"slimsearch-record-title"},s.value.queryHistory),e("ul",{class:"slimsearch-record-contents",role:"listbox"},n.value.map((t,l)=>{const c=r.isQuery&&r.index===l;return e("li",{class:["slimsearch-record-matches",{active:c}],role:"option","aria-selected":c,onClick:()=>{i("updateQuery",t)}},e("div",[e(W,{class:"slimsearch-record-type"}),e("div",{class:"slimsearch-record-content"},t),e("button",{type:"button",class:"slimsearch-remove-icon",title:s.value.remove,"aria-label":s.value.remove,innerHTML:$,onClick:o=>{o.preventDefault(),o.stopPropagation(),f(l)}})]))}))])),z=()=>e("ul",{class:"slimsearch-records"},e("li",{class:"slimsearch-record"},[e("div",{class:"slimsearch-record-title"},s.value.resultHistory),e("ul",{class:"slimsearch-record-contents",role:"listbox"},m.value.map((t,l)=>{const c=!r.isQuery&&r.index===l;return e("li",{class:["slimsearch-record-matches",{active:c}],role:"option","aria-selected":c},e(I,{to:t.link,onClick:()=>{C()}},()=>[e(W,{class:"slimsearch-record-type"}),e("div",{class:"slimsearch-record-content"},[t.header?e("div",{class:"slimsearch-record-content-header"},t.header):null,e("div",t.display.map(o=>S(o)).flat())]),e("button",{type:"button",class:"slimsearch-remove-icon",title:s.value.remove,"aria-label":s.value.remove,innerHTML:$,onClick:o=>{o.preventDefault(),o.stopPropagation(),h(l)}})]))}))]));return Ee("keydown",t=>{if(a.isFocusing){if(H.value){if(t.key==="ArrowUp")J();else if(t.key==="ArrowDown")Y();else if(t.key==="Enter"){const l=w.value.contents[u.value];D(a.queries.join(" ")),p(l),B.push(Q(l)),C()}}else if(t.key==="ArrowUp")T();else if(t.key==="ArrowDown")U();else if(t.key==="Enter"){const{index:l}=r;r.isQuery?(t.preventDefault(),i("updateQuery",n.value[l])):(B.push(m.value[l].link),C())}}}),ae([E,u],()=>{var t;(t=document.querySelector(".slimsearch-record.active .slimsearch-record-matches.active"))==null||t.scrollIntoView(!1)},{flush:"post"}),()=>e("div",{id:"slimsearch-results",class:["slimsearch-result-wrapper",{empty:a.queries.length?!H.value:!q.value}]},a.queries.length?R.value?e(se,{hint:s.value.searching}):H.value?e("div",{class:"slimsearch-records",role:"listbox","aria-labeledby":"slimsearch-label"},d.value.map(({title:t,contents:l},c)=>{const o=E.value===c;return e("div",{class:["slimsearch-record",{active:o}],role:"group","aria-selected":o},[e("div",{class:"slimsearch-record-title"},t||s.value.defaultTitle),e("ul",{class:"slimsearch-record-contents"},l.map((A,G)=>{const L=o&&u.value===G;return e("li",{class:["slimsearch-record-matches",{active:L}],role:"option","aria-selected":L},e(I,{to:Q(A),onClick:()=>{D(a.queries.join(" ")),p(A),C()}},()=>[A.type==="text"?null:e(A.type==="title"?re:A.type==="heading"?ie:Be,{class:"slimsearch-record-type"}),e("div",{class:"slimsearch-record-content"},[A.type==="text"&&A.header?e("div",{class:"slimsearch-record-content-header"},A.header):null,e("div",K(A))])]))}))])})):s.value.emptyResult:q.value?[N(),z()]:s.value.emptyHistory)}});export{He as default};

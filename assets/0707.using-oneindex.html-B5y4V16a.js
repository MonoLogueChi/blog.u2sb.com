import{_ as n}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,a as t,o as i}from"./app-B_XiCQn_.js";const s={};function r(p,e){return i(),a("div",null,e[0]||(e[0]=[t(`<p>很早之前就有为自己博客搭建一个下载站的想法了，正好这几天不算太忙，就弄个OneIndex实施一下。</p><p>鉴于国内网盘纷纷倒下，蓝奏云也不太受待见，百度云限速严重，而且不装客户端还不给你下载，其他网盘分享文件都略微有些蛋疼，所以我就决定自己搭建一个下载站，用来分发博客里分享的文件。</p><p>更重要的一点，以后我发的视频有地方放了，不需要像以前那样，先发到视频网站，然后再用外部播放器。</p><h2 id="需求" tabindex="-1"><a class="header-anchor" href="#需求"><span>需求</span></a></h2><table><thead><tr><th style="text-align:left;">需求</th><th style="text-align:left;">备注</th></tr></thead><tbody><tr><td style="text-align:left;">OneDrive</td><td style="text-align:left;">必须</td></tr><tr><td style="text-align:left;">主机空间</td><td style="text-align:left;">必须；PHP 5.6+ 打开curl支持</td></tr><tr><td style="text-align:left;">域名</td><td style="text-align:left;">非必需</td></tr></tbody></table><h3 id="onedrive" tabindex="-1"><a class="header-anchor" href="#onedrive"><span>OneDrive</span></a></h3><p>没有的朋友在这里注册一个<a href="https://onedrive.live.com?invref=6d31d88d0e039653&amp;invscr=90" target="_blank" rel="noopener noreferrer">onedrive.live.com</a>，如果你不能正常注册的话，可以试试直接用Windows客户端注册，也可以直接用Windows的Microsoft 帐户登陆，反正具体要怎么弄，你们自己想办法吧，如果连这一步都搞不定的话，那么可以直接关掉这篇文章了。</p><h3 id="主机空间" tabindex="-1"><a class="header-anchor" href="#主机空间"><span>主机空间</span></a></h3><p>还是和以前一样，推荐使用vps，使用主机空间的话，应该也是可以的，但是并不推荐使用，VPS的话，我可以推荐两家，一家是我以前一直在用的搬瓦工，另一家是hiformance，这两家都支持支付宝收款，相对来说hiformance的优惠力度更大一点，但是性能什么的怎么样，那就要另说了。总之，你花多少钱买什么样的东西，心里应该要有点ACD数。</p><p>弄完了之后宝塔面板直接撸下来就行了，也不用自己配或者搞什么LNMP什么的，都是给自己找麻烦。</p><h3 id="域名" tabindex="-1"><a class="header-anchor" href="#域名"><span>域名</span></a></h3><p>域名不算非必需的，但是有一个最好，如果想长久用的话，建议花钱搞一个域名，便宜的一年也就几块钱十几块钱的。</p><h2 id="搭建过程" tabindex="-1"><a class="header-anchor" href="#搭建过程"><span>搭建过程</span></a></h2><h3 id="php" tabindex="-1"><a class="header-anchor" href="#php"><span>PHP</span></a></h3><p>Nginx、PHP什么的我就不多说了，宝塔面板一梭子撸下来就行了。</p><h3 id="oneindex" tabindex="-1"><a class="header-anchor" href="#oneindex"><span>OneIndex</span></a></h3><p>去<a href="https://github.com/donwa/oneindex" target="_blank" rel="noopener noreferrer">GitHub</a>下载，并且解压，然后想办法传上去就可以了，至于权限什么的，保证cache和config有读写权限就可以了。不建议直接clone到vps里。</p><p>然后访问主机空间，按照提示去安装就可以了，一步一步走下去就行了。</p><h3 id="静态规则" tabindex="-1"><a class="header-anchor" href="#静态规则"><span>静态规则</span></a></h3><p>去掉问号使用</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>location / {</span></span>
<span class="line"><span>	index index.html index.php; </span></span>
<span class="line"><span>	if (-f $request_filename/index.html){ </span></span>
<span class="line"><span>		rewrite (.*) $1/index.html break; </span></span>
<span class="line"><span>	} </span></span>
<span class="line"><span>	if (-f $request_filename/index.php){ </span></span>
<span class="line"><span>		rewrite (.*) $1/index.php; </span></span>
<span class="line"><span>	} </span></span>
<span class="line"><span>	if (!-f $request_filename){ </span></span>
<span class="line"><span>		rewrite (.*) /index.php; </span></span>
<span class="line"><span>	} </span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="dplayer" tabindex="-1"><a class="header-anchor" href="#dplayer"><span>Dplayer</span></a></h2><p>使用Dplayer的时候有可能会遇到跨域请求的问题，只需要在index.php内添加</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>header(&quot;Access-Control-Allow-Origin: https://www.xxwhite.com&quot;);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>就可以了。</p><p>例如<a href="https://www.xxwhite.com/2017/VideoTest.html" target="_blank" rel="noopener noreferrer">测试视频</a></p><h2 id="速度测试" tabindex="-1"><a class="header-anchor" href="#速度测试"><span>速度测试</span></a></h2><p>目前我的域名还在备案过程中，根目录还不能访问，想测试速度的可以先用这个文件试一下</p><p><a href="https://dl.sm9.top/Video/2018/%E6%8E%98%E5%9C%B0%E6%B1%82%E5%8D%87_x264.mp4" target="_blank" rel="noopener noreferrer">测速视频</a></p>`,29)]))}const o=n(s,[["render",r]]),h=JSON.parse('{"path":"/2018/0707.using-oneindex.html","title":"OneIndex下载站搭建","lang":"zh-CN","frontmatter":{"title":"OneIndex下载站搭建","date":"2018-07-07T08:49:12.000Z","tag":["建站笔记","涨姿势"],"keywords":"OneIndex OneDrive 下载站","comments":true,"redirectFrom":["/2018/using-oneindex.html"],"description":"很早之前就有为自己博客搭建一个下载站的想法了，正好这几天不算太忙，就弄个OneIndex实施一下。","head":[["meta",{"property":"og:url","content":"https://blog.u2sb.com/2018/0707.using-oneindex.html"}],["meta",{"property":"og:site_name","content":"叉叉白"}],["meta",{"property":"og:title","content":"OneIndex下载站搭建"}],["meta",{"property":"og:description","content":"很早之前就有为自己博客搭建一个下载站的想法了，正好这几天不算太忙，就弄个OneIndex实施一下。"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-04-06T07:21:58.000Z"}],["meta",{"property":"article:tag","content":"建站笔记"}],["meta",{"property":"article:tag","content":"涨姿势"}],["meta",{"property":"article:published_time","content":"2018-07-07T08:49:12.000Z"}],["meta",{"property":"article:modified_time","content":"2025-04-06T07:21:58.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"OneIndex下载站搭建\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2018-07-07T08:49:12.000Z\\",\\"dateModified\\":\\"2025-04-06T07:21:58.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"MonoLogueChi\\",\\"url\\":\\"https://blog.u2sb.com\\"}]}"]]},"git":{"createdTime":1743924118000,"updatedTime":1743924118000,"contributors":[{"name":"MonoLogueChi","username":"MonoLogueChi","email":"xxwhite@foxmail.com","commits":1,"url":"https://github.com/MonoLogueChi"}]},"readingTime":{"minutes":2.65,"words":794},"filePathRelative":"2018/0707.using-oneindex.md","localizedDate":"2018年7月7日","excerpt":"<p>很早之前就有为自己博客搭建一个下载站的想法了，正好这几天不算太忙，就弄个OneIndex实施一下。</p>\\n","autoDesc":true}');export{o as comp,h as data};

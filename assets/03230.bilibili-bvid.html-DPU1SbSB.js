import{_ as e}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as t,a,o}from"./app-CPuZLzQp.js";const r="/assets/Snipaste_2020-03-24_09-46-00-Dnj-J53I.png",n={};function d(p,i){return o(),t("div",null,i[0]||(i[0]=[a('<p>今天开始，BiliBili 视频使用 bv 号代替以前的 av 号，知乎上已经有大佬给出了 bvid 转换成 aid 的算法。</p><h2 id="解释" tabindex="-1"><a class="header-anchor" href="#解释"><span>解释</span></a></h2><p>昨天发现这个问题以后，看了一下 api，使用 bvid 是可以直接查询到 cid 的，这样对我的弹幕服务器影响甚小，对其他的视频下载器或者是什么解析服务影响应该也不大。</p><p>简单解释原理，B 站以前有两个比较重要的表示，分别是 aid 和 cid，现在使用 bvid 代替 aid，作用是一样的。不管是解析弹幕还是解析视频，最终都是使用 cid 查询的，大概可以这么理解，aid 或者是 bvid 对应的是投稿，cid 对应的是视频。</p><figure><img src="'+r+`" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>以前通过 aid 查询 cid 的 api 主要有两个，分别是</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>https://www.bilibili.com/widget/getPageList?aid={aid}</span></span>
<span class="line"><span>https://api.bilibili.com/x/player/pagelist?aid={aid}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>第一个 api 不能使用 bvid 查询，第二个 api 可以，只需要使用参数 <code>bvid={bvid}</code> 即可，比如 <code>https://api.bilibili.com/x/player/pagelist?bvid=BV18b411j72u</code>。</p><h2 id="修改" tabindex="-1"><a class="header-anchor" href="#修改"><span>修改</span></a></h2><p>看过我上一篇文章的知道，我以前使用的是第一个接口，这次需要修改为使用第二个 api，难度不大，只是返回结果数据结构变了，而且压缩算法不再是 gzip 了。</p><p>总体来说，改动不大，只需要简单的 api，再加上一个参数就可以了。</p><p>具体详情可以看我的 <a href="https://github.com/MonoLogueChi/Danmu.Server" target="_blank" rel="noopener noreferrer">GitHub 项目</a></p><p>具体代码为 <a href="https://github.com/MonoLogueChi/Danmu.Server/commit/9abca85302d91f0ff72a80abd5232256f78c2e2f" target="_blank" rel="noopener noreferrer">aaf7e3b </a></p>`,13)]))}const c=e(n,[["render",d]]),b=JSON.parse('{"path":"/2020/03230.bilibili-bvid.html","title":"BiliBili的bvid查询cid","lang":"zh-CN","frontmatter":{"title":"BiliBili的bvid查询cid","date":"2020-03-23T21:58:35.000Z","tag":["C#","dotnet"],"keywords":"BiliBili bvid bv 弹幕解析","comments":true,"redirectFrom":["/2020/bilibili-bvid.html"],"description":"今天开始，BiliBili 视频使用 bv 号代替以前的 av 号，知乎上已经有大佬给出了 bvid 转换成 aid 的算法。","head":[["meta",{"property":"og:url","content":"https://blog.u2sb.com/2020/03230.bilibili-bvid.html"}],["meta",{"property":"og:site_name","content":"叉叉白"}],["meta",{"property":"og:title","content":"BiliBili的bvid查询cid"}],["meta",{"property":"og:description","content":"今天开始，BiliBili 视频使用 bv 号代替以前的 av 号，知乎上已经有大佬给出了 bvid 转换成 aid 的算法。"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-04-06T06:29:45.000Z"}],["meta",{"property":"article:tag","content":"C#"}],["meta",{"property":"article:tag","content":"dotnet"}],["meta",{"property":"article:published_time","content":"2020-03-23T21:58:35.000Z"}],["meta",{"property":"article:modified_time","content":"2025-04-06T06:29:45.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"BiliBili的bvid查询cid\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2020-03-23T21:58:35.000Z\\",\\"dateModified\\":\\"2025-04-06T06:29:45.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"MonoLogueChi\\",\\"url\\":\\"https://blog.u2sb.com\\"}]}"]]},"git":{"createdTime":1743920985000,"updatedTime":1743920985000,"contributors":[{"name":"MonoLogueChi","username":"MonoLogueChi","email":"xxwhite@foxmail.com","commits":1,"url":"https://github.com/MonoLogueChi"}]},"readingTime":{"minutes":1.35,"words":404},"filePathRelative":"2020/03230.bilibili-bvid.md","localizedDate":"2020年3月24日","excerpt":"<p>今天开始，BiliBili 视频使用 bv 号代替以前的 av 号，知乎上已经有大佬给出了 bvid 转换成 aid 的算法。</p>\\n","autoDesc":true}');export{c as comp,b as data};
